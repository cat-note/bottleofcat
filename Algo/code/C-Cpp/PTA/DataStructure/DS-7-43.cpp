#include <cstdio>

using namespace std;

// è¡¨é¡¹
struct Item
{
    char key[9]; // å…³é”®å­—(å­—ç¬¦æ•°ç»„)
    Item()
    {
        key[0] = '\0'; // åˆå§‹ä¸ºç©ºå­—ç¬¦ä¸²
    }
};

// å“ˆå¸Œè¡¨
class HashTable
{
private:
    int size;
    Item *table;

public:
    HashTable(int tableSize)
    {
        table = new Item[tableSize];
        size = tableSize;
    }
    // ææ„
    ~HashTable()
    {
        delete[] table; // é‡Šæ”¾å†…å­˜
    }
    // åˆ¤æ–­ä¸¤å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰
    bool strEquals(const char *a, const char *b)
    {
        int ptr = 0;
        // ä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½æ²¡æœ‰åˆ°å°¾éƒ¨çš„æ—¶å€™æ¯”è¾ƒæ¯ä¸ªå­—ç¬¦
        while (a[ptr] != '\0' && b[ptr] != '\0')
        {
            if (a[ptr] != b[ptr])
                return false;
            ptr++;
        }
        // å¦‚æœä¸¤å­—ç¬¦ä¸²é•¿åº¦ä¸ç›¸ç­‰ï¼Œä¹Ÿæ˜¯ä¸ç­‰çš„
        if (a[ptr] != '\0' || b[ptr] != '\0')
            return false;
        return true;
    }
    // å¤åˆ¶å­—ç¬¦ä¸²
    void strCpy(const char *from, char *to)
    {
        int ptr = 0;
        while (from[ptr] != '\0')
        {
            to[ptr] = from[ptr];
            ptr++;
        }
        to[ptr] = '\0';
    }
    // åˆ¤æ–­strå¯¹åº”çš„hashæ˜¯å¦å¯ç”¨
    bool hashAvailable(int hash, const char *str)
    {
        return strEquals(table[hash].key, str) || table[hash].key[0] == '\0';
    }
    // è¿”å›å…³é”®å­—å¯¹åº”çš„ä¸‹æ ‡
    int operator[](const char *str)
    {
        int strLen = 0; // å­—ç¬¦ä¸²é•¿åº¦
        while (str[strLen] != '\0')
            strLen++;
        // å°†å€’æ•°ä¸‰ä¸ªå­—ç¬¦è½¬æ¢ä¸ºåè¿›åˆ¶æ•´å‹key
        int key = 0;
        int exp = 0;          // æŒ‡æ•°
        int charNum = 0;      // è¯»å–çš„å­—ç¬¦æ•°
        int weights[4] = {1}; // ç”¨äºé€’æ¨ä½æƒçš„æ•°ç»„, 32^n
        // ğŸ’¡å¯èƒ½å­—ç¬¦ä¸²æœ‰ä¸è¶³ä¸‰ä¸ªå­—ç¬¦çš„æƒ…å†µ
        for (int i = strLen - 1; i >= 0 && charNum < 3; i--) // ä»ä½ä½å‘é«˜ä½(ä»å³è‡³å·¦)æ‰«æã€è‡³å¤šä¸‰ä¸ªå­—ç¬¦ã€‘
        {
            // æ³¨: è¿™é‡Œå¯èƒ½ä¼šè§¦å‘PTAé‡‡ç”¨çš„ç¼–è¯‘å™¨çš„BUGï¼Œå¯¼è‡´è¾“å‡ºé”™è¯¯
            // å¦‚æœè¿™ä¸ªè¿‡ä¸äº†ï¼Œå¯ä»¥é‡‡ç”¨DS-7-43-alternative.cppè¿™ä¸ªé¢˜è§£çš„å†™æ³•
            key += weights[exp] * (int)(str[i] - 'A'); // ä½æƒÃ—å­—ç¬¦ä»£å·
            weights[exp + 1] = weights[exp] * 32;      // é€’æ¨ä½æƒ
            exp++;
            charNum++;
        }
        // é™¤ç•™ä½™æ•°æ³•ç®—å‡ºå“ˆå¸Œ
        int hash = key % size;
        // å¤„ç†å“ˆå¸Œç¢°æ’ï¼ˆå¹³æ–¹æ¢æµ‹æ³•ï¼‰
        int inc = 1;                   // å¢é‡
        int maxInc = size / 2;         // å¢é‡<=è¡¨é•¿/2
        if (!hashAvailable(hash, str)) // å¦‚æœhashå¤„æœ‰ç¢°æ’ï¼Œå°±å¤„ç†ç¢°æ’
            while (true)
            {
                int hashForward = (hash + inc * inc) % size; // å‘åå¹³æ–¹æ¢æµ‹ 1^2, 2^2, 3^2, ..., maxInc^2
                if (hashAvailable(hashForward, str))
                {
                    // å¦‚æœæ‰¾åˆ°äº†è¡¨é¡¹å°±è¿”å›ä½ç½®
                    hash = hashForward;
                    break;
                }
                // ğŸ’¡æ³¨æ„è¿™é‡Œè¦é˜²æ­¢è¶Šç•Œï¼Œhashåœ¨å‡å»inc^2æ—¶è¿˜è¦åŠ ä¸Šsizeå†å–ä½™
                int hashBackward = (size + hash - inc * inc) % size; // å‘å‰å¹³æ–¹æ¢æµ‹ -1^2, -2^2, -3^2, ..., -maxInc^2
                if (hashAvailable(hashBackward, str))
                {
                    // å¦‚æœæ‰¾åˆ°äº†è¡¨é¡¹å°±è¿”å›ä½ç½®
                    hash = hashBackward;
                    break;
                }
                inc++;            // å¢é‡å¢åŠ 
                if (inc > maxInc) // è¶…è¿‡æœ€å¤§å¢é‡ç›´æ¥è¿”å›-1ï¼Œå¯»ä½å¤±è´¥
                    return -1;
            };
        strCpy(str, table[hash].key); // å°†å­—ç¬¦ä¸²å­˜å…¥è¡¨é¡¹ä½œä¸ºå…³é”®å­—
        return hash;                  // è¿”å›å­˜å‚¨ä½ç½®
    }
};

int main()
{
    int keyNum, tableSize; // å…³é”®å­—æ€»æ•°å’Œæ•£åˆ—è¡¨é•¿åº¦
    scanf("%d %d", &keyNum, &tableSize);
    HashTable ht(tableSize); // åˆå§‹åŒ–å“ˆå¸Œè¡¨
    char tmpStr[9];          // ä¸´æ—¶å­—ç¬¦æ•°ç»„
    for (int i = 0; i < keyNum; i++)
    {
        scanf("%s", tmpStr);
        if (i != 0)
            printf(" "); // ä¸è¾“å‡ºå¤šä½™ç©ºæ ¼
        printf("%d", ht[tmpStr]);
    }
    return 0;
}

/*
    æœ¬é¢˜ä»ç„¶è€ƒå¯Ÿå“ˆå¸Œè¡¨ï¼Œç›¸æ¯”ä¸Šä¸€é¢˜ï¼Œè¿™ä¸€é¢˜èšç„¦äºå­—ç¬¦ä¸²çš„å“ˆå¸Œï¼Œå“ˆå¸Œå‡½æ•°é‡‡ç”¨ã€é™¤ç•™ä½™æ•°æ³•ã€‘ï¼Œå¤„ç†ç¢°æ’çš„æ–¹æ³•æ˜¯ã€å¹³æ–¹æ¢æµ‹æ³•ã€‘ã€‚

    å­—ç¬¦ä¸²çš„å“ˆå¸Œå¸¸ç”¨æ–¹æ³•å°±æ˜¯:
        - å°†ä¸²ä¸­ã€éƒ¨åˆ†æˆ–æ¯ä¸€ä¸ªå­—ç¬¦çœ‹ä½œæŸä¸€ä¸ªè¿›åˆ¶çš„æ•°ã€‘
        - ç„¶åå°†å­—ç¬¦ä¸²ä½œä¸ºä¸€ä¸ªæ•°è½¬æ¢ä¸ºã€åè¿›åˆ¶æ•°ã€‘
        - å¯¹è¿™ä¸ªåè¿›åˆ¶æ•°è¿›è¡Œå“ˆå¸Œï¼Œå¾—åˆ°ä¸€ä¸ªã€å“ˆå¸Œå€¼ã€‘ã€‚

    é¢˜ç›®çš„æ„æ€å…¶å®æ˜¯æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆã€32è¿›åˆ¶çš„æ•°å­—ã€‘
    ä¸ºä»€ä¹ˆæ˜¯32è¿›åˆ¶ï¼Ÿå› ä¸ºæ¯ä¸ªå­—ç¬¦æœ‰26ç§å¯èƒ½ï¼Œéœ€è¦ç”¨5ä½äºŒè¿›åˆ¶è¿›è¡Œè¡¨ç¤º
        * 5ä½äºŒè¿›åˆ¶è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä¸€ä¸ªå­—ç¬¦å…¶å®å°±å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ª32è¿›åˆ¶æ•°ä½ã€‚
    ----------------------------
    å€¼å¾—æ³¨æ„ï¼Œæœ¬é¢˜è®¡ç®—å“ˆå¸Œæ—¶åªå–äº†å­—ç¬¦ä¸²ã€åä¸‰ä¸ªå­—ç¬¦ã€‘:
        - ä¹Ÿå°±æ˜¯è¯´ï¼ŒNNKå’ŒINNKè¿™æ ·çš„å­—ç¬¦ä¸²å°±ä¼šäº§ç”Ÿå†²çªã€‚
        - å› æ­¤ï¼Œè¡¨é¡¹ä¸­è¦ã€å‚¨å­˜å…³é”®å­—å­—ç¬¦ä¸²ã€‘ç”¨ä½œå¯¹æ¯”ã€‚
    ----------------------------
    å¦‚æœå“ˆå¸Œå€¼hashå¯¹åº”çš„ä½ç½®ã€å‡ºç°å†²çªã€‘ï¼Œæ‰è¿›è¡Œç¢°æ’å¤„ç†ã€‚
    å…³äºå¹³æ–¹æ¢æµ‹æ³•:
        - æŒ‡å®šä¸€ä¸ªå¢é‡d
        - æŸ¥è¯¢hash+d^2å’Œhash-d^2å¯¹åº”çš„ä½ç½®æ˜¯å¦æœ‰å†²çª
            * æˆ‘æ„¿ç§°ä¹‹ä¸ºâ€œå‘åæ¢æµ‹â€å’Œâ€œå‘å‰æ¢æµ‹â€
        - d+1
    ç›´åˆ°æ‰¾åˆ°ã€æ²¡æœ‰å†²çªçš„ä½ç½®ã€‘ä¸ºæ­¢ã€‚

    ğŸ’¡ æ³¨æ„ä¸€ç‚¹: å¹³æ–¹æ¢æµ‹ã€å‘åæ¢æµ‹ã€‘çš„æ—¶å€™å°å¿ƒä¸‹æ ‡è¶Šç•Œï¼Œåœ¨å‡å»å¢é‡æ—¶å¾—åŠ ä¸Šä¸ªsizeï¼Œè¡¨è¾¾å¼å½¢å¦‚(size+hash-å¢é‡)%sizeã€‚
    -----------------------------

    æ°¸è¿œè¦è®°ä½ï¼Œå‡ºé¢˜äººå¾ˆç‹¡çŒ¾ã€‚æœ¬é¢˜ä¸­ä»–åªè¯´äº†å­—ç¬¦ä¸²æœ€é•¿æ˜¯å¤šå°‘ï¼Œä½†ã€æ²¡è¯´æœ€çŸ­æœ‰å¤šçŸ­ã€‘ï¼Œ
    å› æ­¤æœ¬é¢˜è‚¯å®šä¼šè€ƒå¯Ÿåˆ°å­—ç¬¦ä¸²é•¿åº¦<3çš„æƒ…å†µï¼

        - å¤„ç†æ–¹æ³•å…¶å®ä¹Ÿä¸éš¾ï¼Œä»å­—ç¬¦ä¸²å°¾éƒ¨å¼€å§‹æ‰«æã€è‡³å¤šä¸‰ä¸ªå­—ç¬¦ã€‘è¿›è¡Œå¤„ç†å³å¯ï¼Œä¹Ÿå°±æ˜¯ä»ä½ä½å‘é«˜ä½æ‰«æï¼Œè½¬æ¢ä¸ºåè¿›åˆ¶æ•°
        * è¯¦è§ä»£ç ã€‚

    -----------------------------

        - SomeBottle 2023.2.1
*/

/*
æˆ‘è‡ªå·±æƒ³çš„ä¸€ä¸ªæµ‹è¯•ä¾‹ï¼Œå¦‚æœå¹³æ–¹æ¢æµ‹å†™é”™äº†(æ¯”å¦‚è¶Šç•Œäº†)ï¼Œè¿™ä¸ªå¯ä»¥æµ‹è¯•å‡ºæ¥ã€‚
è¾“å…¥:
8 11
ABCD ABC BC C AC ACBD ABCDABCD ADB
æ­£ç¡®è¾“å‡º:
2 1 0 3 6 4 9 10
*/

/*
7-43 å­—ç¬¦ä¸²å…³é”®å­—çš„æ•£åˆ—æ˜ å°„
    ç»™å®šä¸€ç³»åˆ—ç”±å¤§å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²å…³é”®å­—å’Œç´ æ•°Pï¼Œç”¨ç§»ä½æ³•å®šä¹‰çš„æ•£åˆ—å‡½æ•°H(Key)å°†å…³é”®å­—Keyä¸­çš„æœ€å3ä¸ªå­—ç¬¦æ˜ å°„ä¸ºæ•´æ•°ï¼Œæ¯ä¸ªå­—ç¬¦å 5ä½ï¼›å†ç”¨é™¤ç•™ä½™æ•°æ³•å°†æ•´æ•°æ˜ å°„åˆ°é•¿åº¦ä¸ºPçš„æ•£åˆ—è¡¨ä¸­ã€‚ä¾‹å¦‚å°†å­—ç¬¦ä¸²AZDEGæ’å…¥é•¿åº¦ä¸º1009çš„æ•£åˆ—è¡¨ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå°†26ä¸ªå¤§å†™è‹±æ–‡å­—æ¯é¡ºåºæ˜ å°„åˆ°æ•´æ•°0~25ï¼›å†é€šè¿‡ç§»ä½å°†å…¶æ˜ å°„ä¸º 3Ã—32^2 + 4Ã—32 + 6 = 3206 ï¼›ç„¶åæ ¹æ®è¡¨é•¿å¾—åˆ°3206%1009=179ï¼Œå³æ˜¯è¯¥å­—ç¬¦ä¸²çš„æ•£åˆ—æ˜ å°„ä½ç½®ã€‚

    å‘ç”Ÿå†²çªæ—¶è¯·ç”¨å¹³æ–¹æ¢æµ‹æ³•è§£å†³ã€‚

è¾“å…¥æ ¼å¼:
    è¾“å…¥ç¬¬ä¸€è¡Œé¦–å…ˆç»™å‡ºä¸¤ä¸ªæ­£æ•´æ•°Nï¼ˆâ‰¤500ï¼‰å’ŒPï¼ˆâ‰¥2Nçš„æœ€å°ç´ æ•°ï¼‰ï¼Œåˆ†åˆ«ä¸ºå¾…æ’å…¥çš„å…³é”®å­—æ€»æ•°ã€ä»¥åŠæ•£åˆ—è¡¨çš„é•¿åº¦ã€‚ç¬¬äºŒè¡Œç»™å‡ºNä¸ªå­—ç¬¦ä¸²å…³é”®å­—ï¼Œæ¯ä¸ªé•¿åº¦ä¸è¶…è¿‡8ä½ï¼Œå…¶é—´ä»¥ç©ºæ ¼åˆ†éš”ã€‚
è¾“å‡ºæ ¼å¼:
    åœ¨ä¸€è¡Œå†…è¾“å‡ºæ¯ä¸ªå­—ç¬¦ä¸²å…³é”®å­—åœ¨æ•£åˆ—è¡¨ä¸­çš„ä½ç½®ã€‚æ•°å­—é—´ä»¥ç©ºæ ¼åˆ†éš”ï¼Œä½†è¡Œæœ«å°¾ä¸å¾—æœ‰å¤šä½™ç©ºæ ¼ã€‚
è¾“å…¥æ ·ä¾‹1:
    4 11
    HELLO ANNK ZOE LOLI
è¾“å‡ºæ ·ä¾‹1:
    3 10 4 0
è¾“å…¥æ ·ä¾‹2:
    6 11
    LLO ANNA NNK ZOJ INNK AAA
è¾“å‡ºæ ·ä¾‹2:
    3 0 10 9 6 1
ä»£ç é•¿åº¦é™åˆ¶
    16 KB
æ—¶é—´é™åˆ¶
    400 ms
å†…å­˜é™åˆ¶
    64 MB
*/